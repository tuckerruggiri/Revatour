<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Revatour MyMap & MyWall</title>

    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />

    <!-- App styles -->
    <link rel="stylesheet" href="style.css" />
</head>
<body>

    <!-- Top Navigation -->
    <header class="topbar">
        <a class="brand home-link" href="index.html#map">Revatour</a>
        <nav class="main-nav">
            <button id="viewMapBtn" class="nav-btn active">MyMap</button>
            <button id="viewWallBtn" class="nav-btn">MyWall</button>
            <button class="nav-btn" onclick="window.location='ticker.html'">Ticker Forum</button>
        </nav>
    </header>

    <main>

<!-- Live Quote Display -->
<div id="liveQuoteBox" style="
  margin: 1rem auto;
  padding: 1rem 1.5rem;
  max-width: 320px;
  border-radius: 12px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.1);
  background: #fff;
  font-family: system-ui, sans-serif;
  text-align: center;
">
  <div id="quotePrice" style="font-size: 1.8rem; font-weight: bold;">—</div>
  <div id="quoteChange" style="font-size: 1.1rem; margin-top: 0.25rem;">—</div>
  <div id="quoteTime" style="font-size: 0.85rem; color: #777; margin-top: 0.25rem;">—</div>
</div>


        <!-- ========== MyMap View ========== -->
        <section id="mapSection" class="view active">

            <div class="view-header">
                <div class="view-header-left">
                    <h1>MyMap</h1>
                    <p class="subtitle">
                        Pin the tickers you trade, leave yourself notes,
                        and build a visual journal of your investing journey.
                    </p>
                </div>

                <div class="map-actions">
                    <div class="search-wrap">
                        <input
                            type="text"
                            id="tickerSearchInput"
                            placeholder="Search tickers or companies (⌘K)"
                            list="tickerOptions"
                        />
                        <button id="clearSearchBtn" class="clear-input-btn" aria-label="Clear search">
                            &times;
                        </button>
                    </div>

                    <button id="openAddPinBtn" class="primary-btn">Add to MyMap</button>
                </div>
            </div>

            <div class="map-layout">
                <div class="map-card-shell">
                    <div id="map"></div>
                </div>

                <aside class="pin-panel">
                    <div class="panel-header">
                        <h2>Your Pins</h2>
                        <span id="pinCount" class="badge">0</span>
                    </div>

                    <div id="pinCards" class="pin-cards">
                        <div class="empty-state">
                            <p>Your map is waiting for its first ticker.
                            Tap <strong>Add to MyMap</strong> to drop a pin.</p>
                        </div>
                    </div>
                </aside>
            </div>
        </section>

        <!-- ========== My Wall View ========== -->
        <section id="wallSection" class="view">
            <div class="view-header">
                <div class="view-header-left">
                    <h1>MyWall</h1>
                    <p class="subtitle">
                        Share your trades, hobbies, and investing highlights with the community.
                    </p>
                </div>
            </div>

            <div class="wall-layout">
                <div class="wall-feed">
                    <form id="wallPostForm" class="card post-form">
                        <h2 style="margin:0 0 12px; font-size:16px; font-weight:600;">
                            Create a post
                        </h2>

                        <textarea
                            id="wallPostText"
                            placeholder="What's on your mind?"
                            required
                        ></textarea>

                        <div class="form-row">
                            <label for="wallPostTicker">Tag a ticker (optional)</label>
                            <input
                                id="wallPostTicker"
                                type="text"
                                placeholder="e.g. NVDA"
                            />
                        </div>

                        <div class="form-row">
                            <label class="file-input">
                                <input type="file" id="wallPostImage" accept="image/*" />
                                <span>Attach an image</span>
                            </label>
                            <span class="file-name" id="wallFileName">No file selected</span>
                        </div>

                        <button type="submit" class="primary-btn">Post to Wall</button>
                    </form>

                    <div id="feedList" class="feed-list"></div>
                </div>

                <aside class="wall-sidebar">
                    <div class="card">
                        <h3 style="margin-top:0; font-size:15px; font-weight:600;">
                            Following
                        </h3>
                        <ul class="following-list">
                            <li>
                                <span class="avatar">AV</span>
                                <div>
                                    <div class="name">Avery Value</div>
                                    <div class="tag">Dividend strategies</div>
                                </div>
                            </li>
                            <li>
                                <span class="avatar">MM</span>
                                <div>
                                    <div class="name">Mila Momentum</div>
                                    <div class="tag">Swing trades</div>
                                </div>
                            </li>
                            <li>
                                <span class="avatar">QT</span>
                                <div>
                                    <div class="name">Quinn Quant</div>
                                    <div class="tag">Options &amp; data nerd</div>
                                </div>
                            </li>
                            <li>
                                <span class="avatar">HG</span>
                                <div>
                                    <div class="name">Harper Growth</div>
                                    <div class="tag">Tech &amp; AI</div>
                                </div>
                            </li>
                        </ul>
                    </div>
                </aside>
            </div>
        </section>
    </main>

    <!-- Add Pin Modal -->
    <div
        id="addPinModal"
        class="modal hidden"
        role="dialog"
        aria-modal="true"
        aria-labelledby="addPinTitle"
        style="z-index:9999;"
    >
        <div class="modal-content">
            <button id="closeAddPinBtn" class="modal-close" aria-label="Close">&times;</button>

            <h2 id="addPinTitle"
                style="margin:0 0 12px; font-size:16px; font-weight:600; color:#1e2030;">
                Add a ticker to MyMap
            </h2>

            <form id="addPinForm" class="modal-form">
                <div class="form-row">
                    <label for="pinTicker">Ticker</label>
                    <input id="pinTicker" name="pinTicker" type="text" placeholder="AAPL" list="tickerOptions" required />
                </div>

                <div class="form-row">
                    <label for="pinNote">Why is this on your map?</label>
                    <textarea id="pinNote" name="pinNote" placeholder="Document your trade, thesis, or milestone."></textarea>
                </div>

                <div class="form-row">
                    <label class="file-input">
                        <input type="file" id="pinImage" accept="image/*" />
                        <span>Attach a photo (optional)</span>
                    </label>
                    <span class="file-name" id="pinFileName">No file selected</span>
                </div>

                <div class="form-actions">
                    <button type="button" id="cancelAddPinBtn" class="secondary-btn">Cancel</button>
                    <button type="submit" class="primary-btn">Save Pin</button>
                </div>
            </form>

            <p class="form-hint">
                Pins are stored on this device so you can keep curating your map over time.
            </p>
        </div>
    </div>

    <datalist id="tickerOptions"></datalist>


    <!-- Leaflet JS -->
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

<!-- Quote box should be visible BEFORE scripts -->
<div class="quote">
  <div id="quotePrice">—</div>
  <div id="quoteChange">—</div>
  <div id="quoteTime" class="muted">—</div>
</div>

<!-- Data + Logic -->
<script src="fetchData.js"></script>
<script src="companies.js"></script>
<script src="script.js"></script>
</body>
</html>
